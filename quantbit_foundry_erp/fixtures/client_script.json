[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Pattern Master",
  "enabled": 1,
  "modified": "2023-12-18 11:42:32.223835",
  "module": "Quantbit Foundry ERP",
  "name": "Filter-Pattern Master",
  "script": "var item_group=\"CASTING\"\nvar company_field ='custom_company'\n\nfrappe.ui.form.on('Pattern Master', {\n\tsetup: function(frm) {\n    \tfrm.set_query(\"item_code\", \"casting_material_details\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  ['Item', 'item_group', '=',item_group],\n        \t\t\t  [\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"sand_item_code\", \"molding_sand_details\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  ['Item', 'item_group', '=',item_group],\n        \t\t\t  [\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \tfrm.set_query(\"pattern_name\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  [\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"pattern_owner\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  [\"Pattern Owner\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \tfrm.set_query(\"quality_type\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  [\"Quality Type\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"pattern_type\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t  [\"Pattern Type\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"item_code\",\"core_material_details\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t   [\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n\t}\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Pouring",
  "enabled": 1,
  "modified": "2023-12-18 12:33:55.321682",
  "module": "Quantbit Foundry ERP",
  "name": "Filter-Pouring",
  "script": "var item_group=\"CASTING\"\n\nvar company_field ='custom_company'\n\nfrappe.ui.form.on('Pouring', {\n\tsetup: function(frm) {\n    \tfrm.set_query(\"contractor\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Supplier\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"shift\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Shift Master\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"furnece\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Furnece Master\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \t\n    \tfrm.set_query(\"pattern_code\",\"pattern_details\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Pattern Master\", \"company\", '=', frm.doc.company],\n        \t\t\t['Pattern Master', 'enable', '=', 1]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"sales_order\",\"pattern_details\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n\t\t\t        ['Sales Order', 'docstatus', '=', '1'],\n        \t\t\t[\"Sales Order\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"item_code\",\"change_mix_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"warehouse\",\"change_mix_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \t\n    \tfrm.set_query(\"warehouse\",\"molding_sand_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"item_code\",\"molding_sand_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"casting_item_code\",\"core_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n\t\t\t    ['Item', 'item_group', '=',item_group],\n    \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \t\n    \tfrm.set_query(\"item_code\",\"core_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"item_code\",\"retained_items\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"target_warehouse\",\"retained_items\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"downtime_reason\",\"downtime_reasons_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Rejection Reason Master\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \t\tfrm.set_query(\"target_warehouse\",\"casting_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"warehouse\",\"core_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \t\tfrm.set_query(\"pattern\",\"core_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Pattern Master\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n    \t\n    \t\tfrm.set_query(\"expense_head_account\",\"additional_cost_details\", function(doc) {\n\t\treturn {\n\t\t\tfilters: [\n    \t\t\t[\"Account\", \"company\", '=', frm.doc.company]\n\t\t\t]   \n\t\t};\n    \t});\n\t}\n});\n\n\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Casting Treatment",
  "enabled": 1,
  "modified": "2023-12-18 12:39:37.935260",
  "module": "Quantbit Foundry ERP",
  "name": "Filter- Casting Treatment",
  "script": "var item_group=\"CASTING\"\nvar company_field ='custom_company'\n\n\n\nfrappe.ui.form.on('Casting Treatment', {\n\tsetup: function(frm) {\n    \tfrm.set_query(\"shift\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Shift Master\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \tfrm.set_query(\"casting_treatment\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Casting Treatment Master\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"select_pouring\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Pouring\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"supervisor\", function(doc, cdt, cdn) {\n\t\tlet d = locals[cdt][cdn];\n\t\treturn {\n\t\t\tfilters: [\n        \t\t\t[\"Employee\", \"company\", '=', frm.doc.company],\n        \t\t\t['Employee', 'designation', '=', 'Supervisor'],\n\t\t\t\t]\n\t\t\t};\n    \t});\n    \t\n    \tfrm.set_query(\"operator\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t\t['Employee', 'designation', '=', 'Operator'],\n\t\t\t\t\t[\"Employee\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"contractor\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t\t[\"Supplier\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"item_code\",\"casting_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t    ['Item', 'item_group', '=',item_group],\n        \t\t\t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\tfrm.set_query(\"source_warehouse\",\"casting_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t   [\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\tfrm.set_query(\"target_warehouse\",\"casting_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t   [\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"item_code\",\"raw_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t   \t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"raw_item_code\",\"raw_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t   \t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\tfrm.set_query(\"source_warehouse\",\"raw_item\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t   [\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\t\tfrm.set_query(\"item_code\",\"rejected_items_reasons\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t[\"Item\", company_field, '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"pouring\",\"rejected_items_reasons\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t[\"Pouring\", \"company\", '=', frm.doc.company],\n\t\t\t\t  \t[\"Pouring\", \"docstatus\", '=', '1']\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n\t\tfrm.set_query(\"rejection_type\",\"rejected_items_reasons\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t[\"Rejection Type Master\", \"company\", '=', frm.doc.company],\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\tfrm.set_query(\"target_warehouse\",\"rejected_items_reasons\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t [\"Warehouse\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\tfrm.set_query(\"expense_head_account\",\"additional_cost_details\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t [\"Account\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\tfrm.set_query(\"downtime_reason\",\"downtime_reasons_details\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t  \t [\"Rejection Reason Master\", \"company\", '=', frm.doc.company]\n\t\t\t\t]\n\t\t\t};\n\t\t});\n\t\t\n    \tfrm.set_query(\"rejection_reason\", \"rejected_items_reasons\", function(doc, cdt, cdn) {\n        let d = locals[cdt][cdn];\n        return {\n            filters: [\n                [\"Rejection Reason Master\", \"company\", '=', frm.doc.company],\n                ['rejection_type', '=', d.rejection_type]\n            ]\n        };\n    });\n\n\t}\n});\n\n",
  "view": "Form"
 }
]